{% extends 'base.html' %}

{% block title %}Clim-Warn Early warning platform - UNEP{% endblock title %}
{% block extra_head %}
<link rel="stylesheet" href="http://openlayers.org/en/v3.0.0/css/ol.css" type="text/css">
<script src="{{ STATIC_URL }}js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}js/bootstrap.min.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}js/ol.js"></script>
<script src="{{ STATIC_URL }}js/ol3-layerswitcher.js"></script>
<script src="{{ STATIC_URL }}js/layerswitcher.js"></script>
<script src="http://openlayers.org/en/v3.0.0/build/ol.js" type="text/javascript"></script>

<script type='text/javascript'>

    $(document).ready(function () {
    $('#tablist').tab();
        });

    var first_map, second_map, third_map 

    function init(){
    first_map = new ol.Map({
        target:'map',
        layers: [new ol.layer.Group({
            title: 'Base Maps',
            layers: [
            new ol.layer.Tile({
                title: 'OSM',
                type: 'base',
                visible: true,
                source: new ol.source.OSM()
                    })
                ]
            }),
            new ol.layer.Group({
                title: 'Overlays',
                layers:[ new ol.layer.Tile({
                    title: 'Drought Turkana',
                    source: new ol.source.TileWMS({
                        url: 'http://maps.virtualkenya.org/geoserver/wms',
                        params: {'LAYERS': ''},
                        serverType: 'geoserver' })
                     })
                ]
            })
        ],
        view: new ol.View({
            projection: 'EPSG:900913',
            center:[4206847, 50232],
            zoom:5
            })
    });
    
    second_map = new ol.Map({
        target:'map_2',
        layers: [new ol.layer.Group({
            title: 'Base Maps',
            layers: [
            new ol.layer.Tile({
                title: 'OSM',
                type: 'base',
                visible: true,
                source: new ol.source.OSM()
                    })
                ]
            }),
            new ol.layer.Group({
                title: 'Overlays',
                layers:[ new ol.layer.Tile({
                    title: 'Drought Turkana',
                    source: new ol.source.TileWMS({
                        url: 'http://maps.virtualkenya.org/geoserver/wms',
                        params: {'LAYERS': 'geonode:vulnerability_classified'},
                        serverType: 'geoserver' 
                            })
                     })
                ]
            })
        ]
    });
    
    third_map = new ol.Map({
        target:'map_3',
        layers: [new ol.layer.Group({
            title: 'Base Maps',
            layers: [
            new ol.layer.Tile({
                title: 'OSM',
                type: 'base',
                visible: true,
                source: new ol.source.OSM()
                    })
                ]
            }),
            new ol.layer.Group({
                title: 'Overlays',
                layers:[ new ol.layer.Tile({
                    title: 'Drought risk map',
                    source: new ol.source.TileWMS({
                        url: 'http://maps.virtualkenya.org/geoserver/wms',
                        params: {'LAYERS': 'geonode:dr_03_dek3'},
                        serverType: 'geoserver' 
                            })
                     }),
                        new ol.layer.Tile({
                            title: 'Constituencies',
                            source: new ol.source.TileWMS({
                            url: 'http://maps.virtualkenya.org/geoserver/wms',
                            params: {'LAYERS': 'geonode:drought_constituencies '},
                            serverType: 'geoserver' 
                            })
                        })
                ]
            })
        ]
    });
    second_map.bindTo('view', first_map);
    third_map.bindTo('view', first_map);
    

    var layerSwitcher = new ol.control.LayerSwitcher();
    third_map.addControl(layerSwitcher);
    
}
</script>
<style>
    .vcenter {
        display: inline-block;
        vertical-align: middle;
        float: none;
    }
</style>
{% endblock extra_head %}

{% block main_content %}
 <div class="container">
 	<div class="row">
 		<div class="col-xs-4 vcenter">
 			<h3>Drought Early Warning Platform</h3>
 		</div>
 		<div class="col-xs-4 vcenter">
 			<form class="form-horizontal">
 				<div class="form-group">
 					<select id="location" class="form-control">
 						<option>Turkana</option>
 					</select>
 				</div>
 			</form>
 		</div>
 		<div class="col-xs-4 vcenter">
 		</div>
 	</div>
 	<div class="row">
 		<div role="tabpanel">
 			<ul class="nav nav-tabs" role="tablist">
 				<li role="presentation" class="active"><a href="#today" aria-controls="today" role="tab" data-toggle="tab">Today</a></li>
 				<li role="presentation" ><a href="#datespecific" aria-controls="datespecific" role="tab" data-toggle="tab">Specific Date</a></li>
 				<li role="presentation"><a href="#animation" aria-controls="animation" role="tab" data-toggle="tab">Animation</a></li>
 			</ul>
 			<div class="tab-content">
 				<div role="tabpanel" class="tab-pane active" id="today">
                    
                        <div id="map" class="col-xs-6 col-sm-4">
                            <h4>Drought severity</h4>
                        </div>
                        <div id="map_2" class="col-xs-6 col-sm-4">
                            <h4>Vulnerability</h4>
                        </div>
                        <div id="map_3" class="col-xs-6 col-sm-4">
                            <h4>Drought risk</h4>
                        </div>
                </div>
 				<div role="tabpanel" class="tab-pane fade" id="datespecific" style="display:block;height: 0;overflow-y: hidden;">
 					
                        <div id="map_dup" class="col-xs-6 col-sm-4">
                            <h4>Drought severity</h4>
                        </div>
                        <div id="map_2_dup" class="col-xs-6 col-sm-4">
                            <h4>Vulnerability</h4>
                        </div>
                        <div id="map_3_dup" class="col-xs-6 col-sm-4">
                            <h4>Drought risk</h4>
                        </div>
                
 				</div>
 				<div role="tabpanel" class="tab-pane fade" id="animation">
 					animation tab
 				</div>
 			</div> 			
 		</div>
 	</div>
 </div>

{% endblock main_content %}
